define(["require", "exports", "./template", "./dom"], function (require, exports, template_1, dom_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var HAS_ROW = /^[\n\r.]+\<tr|^\<tr/;
    var HAS_SVG = /^[\n\r.]+\<svg|^\<path|^\<g/;
    /**
     * Compile the template string into template function.
     * @param  {string} templateString - The template string which is going to convert.
     * @param  {Object} helper? - Helper functions as an object.
     * @private
     */
    //tslint:disable-next-line
    function compile(templateString, helper) {
        var compiler = engineObj.compile(templateString, helper);
        //tslint:disable-next-line
        return function (data, component, propName) {
            var result = compiler(data, component, propName);
            if (typeof result === 'string') {
                if (HAS_SVG.test(result)) {
                    var ele = dom_1.createElement('svg', { innerHTML: result });
                    return ele.childNodes;
                }
                else {
                    var ele = dom_1.createElement((HAS_ROW.test(result) ? 'table' : 'div'), { innerHTML: result });
                    return ele.childNodes;
                }
            }
            else {
                return result;
            }
        };
    }
    exports.compile = compile;
    /**
     * Set your custom template engine for template rendering.
     * @param  {ITemplateEngine} classObj - Class object for custom template.
     * @private
     */
    function setTemplateEngine(classObj) {
        engineObj.compile = classObj.compile;
    }
    exports.setTemplateEngine = setTemplateEngine;
    /**
     * Get current template engine for template rendering.
     * @param  {ITemplateEngine} classObj - Class object for custom template.
     * @private
     */
    function getTemplateEngine() {
        return engineObj.compile;
    }
    exports.getTemplateEngine = getTemplateEngine;
    //Default Engine Class
    var Engine = /** @class */ (function () {
        function Engine() {
        }
        Engine.prototype.compile = function (templateString, helper) {
            if (helper === void 0) { helper = {}; }
            return template_1.compile(templateString, helper);
        };
        return Engine;
    }());
    var engineObj = { compile: new Engine().compile };
});
